<mat-card class="login-card">
  <h2 class="title">Welcome Back ðŸ‘‹</h2>

  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
    <!-- Email Field -->
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Email Address</mat-label>
      <input matInput formControlName="email" type="email" placeholder="Enter your email" />

      @if (f['email'].hasError('required') && f['email'].touched) {
        <mat-error>Email is required</mat-error>
      } @else if (f['email'].hasError('email') && f['email'].touched) {
        <mat-error>Please enter a valid email address</mat-error>
      }
    </mat-form-field>

    <!-- Password Field -->
    <mat-form-field appearance="outline" class="form-field">
      <mat-label>Password</mat-label>
      <input
        matInput
        [type]="hidePassword ? 'password' : 'text'"
        formControlName="password"
        placeholder="Enter your password"
      />
      <button
        type="button"
        mat-icon-button
        matSuffix
        (click)="hidePassword = !hidePassword"
        [attr.aria-label]="'Hide password'"
        [attr.aria-pressed]="hidePassword"
      >
        <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
      </button>

      @if (f['password'].hasError('required') && f['password'].touched) {
        <mat-error>Password is required</mat-error>
      } @else if (f['password'].hasError('minlength') && f['password'].touched) {
        <mat-error>Password must be at least 6 characters long</mat-error>
      }
    </mat-form-field>

    <!-- Remember Me Checkbox -->
    <div class="remember-me-container">
      <mat-checkbox 
        formControlName="rememberMe" 
        (change)="toggleRememberMe()"
        class="remember-me-checkbox">
        Remember me
      </mat-checkbox>
    </div>

    <!-- Submit Button -->
    <button 
      mat-flat-button 
      color="primary" 
      class="submit-btn" 
      type="submit"
      [disabled]="loginForm.invalid || isLoading">
      
      @if (isLoading) {
        <mat-spinner diameter="20" class="spinner"></mat-spinner>
        <span class="loading-text">Signing in...</span>
      } @else {
        <span>Sign In</span>
      }
    </button>

    <!-- Extra Links -->
    <div class="extra-links">
      <a routerLink="/register" class="register-link">
        <mat-icon>person_add</mat-icon>
        Create Account
      </a>
      <a routerLink="/forgot-password" class="forgot-link">
        <mat-icon>help</mat-icon>
        Forgot Password?
      </a>
    </div>
  </form>
</mat-card>
